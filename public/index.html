<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Prometheus Web Port</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="scanlines" aria-hidden="true"></div>

    <header class="masthead">
      <div class="masthead__title">Prometheus Web Port</div>
      <p class="masthead__subtitle">Black terminal-inspired UI for running the Prometheus Lua obfuscator entirely offline.</p>
      <div class="masthead__links">
        <a href="https://github.com/Vvoidddd/Prometheus-Web-Port" target="_blank" rel="noreferrer">GitHub</a>
        <a href="dev-info.html">Dev notes</a>
        <a href="https://github.com/prometheus-lua/Prometheus" target="_blank" rel="noreferrer">Prometheus repo</a>
      </div>
    </header>

    <main class="site-shell">
      <section class="hero card">
        <div class="hero__copy">
          <p class="eyebrow">terminal build // local only</p>
          <h1>Paste Lua, pick a preset, ship the obfuscated payload without trusting a remote host.</h1>
          <p>
            Prometheus Web Port keeps the retro look of early admin consoles, but adds modern tooling: live log tailing,
            preset toggles, Lua target selection, and built-in update prompts for both this UI and the Prometheus core.
          </p>
          <div class="hero__actions">
            <button class="btn btn--solid" onclick="document.getElementById('source').focus();">Focus editor</button>
            <a class="btn btn--ghost" href="https://github.com/prometheus-lua/Prometheus" target="_blank" rel="noreferrer"
              >View Prometheus</a
            >
          </div>
        </div>
        <div class="hero__stats">
          <div>
            <p>files this session</p>
            <span id="statFiles">0</span>
          </div>
          <div>
            <p>lines processed</p>
            <span id="statLines">0</span>
          </div>
          <div>
            <p>engine</p>
            <span>Prometheus CLI</span>
          </div>
        </div>
      </section>

      <section class="system">
        <div class="card update-panel">
          <div class="update-panel__header">
            <h2>Version control</h2>
            <p>Checks against the public repositories before downloading anything.</p>
          </div>
          <div class="update-row">
            <div>
              <p class="micro">Web Port build</p>
              <p class="tag tag--stacked" id="appVersion">--</p>
            </div>
            <button class="btn btn--ghost" id="updateAppBtn" disabled>Download update</button>
          </div>
          <div class="update-row">
            <div>
              <p class="micro">Prometheus core</p>
              <p class="tag tag--stacked" id="promVersion">--</p>
            </div>
            <button class="btn btn--ghost" id="updatePromBtn" disabled>Update core</button>
          </div>
          <p class="update-status" id="updateStatus">No update checks yet.</p>
        </div>

        <div class="card info-panel">
          <h3>Fast facts</h3>
          <ul>
            <li>No telemetry, no remote calls beyond update checks.</li>
            <li>Preset parity with the CLI: Minify, Weak, Medium, Strong.</li>
            <li>Lua51 and LuaU toggles, plus optional pretty-print output.</li>
            <li>Server writes to a temp file, runs Prometheus, then shreds everything.</li>
          </ul>
        </div>
      </section>

      <section class="workbench">
        <div class="workbench__panel card">
          <header class="panel-head">
            <div>
              <p class="micro">input console</p>
              <h2>Configure + paste</h2>
            </div>
            <span class="tag tag--neutral">lua in</span>
          </header>

          <div class="control-grid">
            <label class="control">
              <span>Preset</span>
              <select id="preset"></select>
            </label>
            <label class="control">
              <span>Lua version</span>
              <select id="luaVersion"></select>
            </label>
            <label class="control toggle">
              <span>Pretty print</span>
              <input type="checkbox" id="prettyPrint" />
            </label>
          </div>

          <div class="editor">
            <div class="editor__head">
              <span>Lua source</span>
              <button id="sampleBtn" type="button" class="tag">Load sample</button>
            </div>
            <div class="editor__surface">
              <textarea id="source" spellcheck="false" placeholder="-- drop Lua here"></textarea>
              <pre aria-hidden="true" class="code-highlight"><code id="sourceHighlight"></code></pre>
            </div>
          </div>

          <div class="actions">
            <button id="obfuscateBtn" type="button" class="btn btn--solid">Obfuscate</button>
          </div>
        </div>

        <div class="workbench__panel card">
          <header class="panel-head">
            <div>
              <p class="micro">output console</p>
              <h2>Obfuscated payload</h2>
            </div>
            <span class="tag tag--accent">lua out</span>
          </header>

          <div class="editor">
            <div class="editor__head">
              <span>Obfuscated Lua</span>
              <div class="editor__actions">
                <button id="copyBtn" type="button" class="tag">Copy</button>
                <button id="downloadBtn" type="button" class="tag">Download</button>
              </div>
            </div>
            <div class="editor__surface">
              <textarea id="result" spellcheck="false" readonly></textarea>
              <pre aria-hidden="true" class="code-highlight"><code id="resultHighlight"></code></pre>
            </div>
          </div>

          <div class="log">
            <header class="panel-head small">
              <div>
                <p class="micro">engine logbook</p>
                <h3>Prometheus feed</h3>
              </div>
            </header>
            <pre id="logWindow">waiting for first run...</pre>
          </div>
        </div>
      </section>

      <section class="callouts">
        <article class="card">
          <h3>API surface</h3>
          <p><strong>POST /api/obfuscate</strong> - run Prometheus with your selection.</p>
          <p><strong>GET /api/presets</strong> - fetch presets and Lua targets.</p>
        </article>
        <article class="card">
          <h3>Execution chain</h3>
          <p>Snippets live in a temp directory just long enough for Prometheus to run.</p>
          <p><code>lua ./Prometheus-master/cli.lua</code> executes with your preset, Lua target, and pretty flag.</p>
          <p>Stdout/stderr stream back into the log window for immediate auditing.</p>
        </article>
        <article class="card">
          <h3>Credits</h3>
          <p>Interface + plumbing by <a href="https://github.com/Vvoidddd" target="_blank" rel="noreferrer">void</a>.</p>
          <p>Obfuscation core by <a href="https://github.com/prometheus-lua/Prometheus" target="_blank" rel="noreferrer">Prometheus</a>.</p>
          <p>More transparency notes live on the dev-info page.</p>
        </article>
      </section>
    </main>

    <footer class="footer">
      <p>Prometheus Web Port · blackline terminal edition · 2026</p>
    </footer>

    <script src="app.js" defer></script>
  </body>
</html>
